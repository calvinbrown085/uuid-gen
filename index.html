<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UUID Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100">
    <div class="min-h-screen flex items-center justify-center">
        <div class="w-full max-w-2xl mx-auto p-4 sm:p-6 lg:p-8">
            <div class="bg-white dark:bg-gray-800 shadow-lg rounded-xl p-8">
                <h1 class="text-3xl sm:text-4xl font-bold text-center mb-2">UUID Generator</h1>
                <p class="text-center text-gray-500 dark:text-gray-400 mb-8">Generate Version 4 UUIDs for your development needs.</p>

                <!-- UUID Display Area -->
                <div class="relative mb-6">
                    <div id="uuid-display" class="bg-gray-100 dark:bg-gray-700 rounded-lg px-4 py-3 text-lg sm:text-xl font-mono break-words text-center select-all">
                        Click the button to generate a UUID
                    </div>
                    <button id="copy-button" class="absolute top-1/2 right-3 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200" title="Copy to clipboard">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                    </button>
                </div>

                <!-- Generate Button -->
                <button id="generate-button" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg text-lg transition-transform transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800">
                    Generate New UUID
                </button>

                <!-- Toast Notification -->
                <div id="toast" class="fixed bottom-5 right-5 bg-green-500 text-white py-2 px-4 rounded-lg shadow-lg opacity-0 transition-opacity duration-300">
                    Copied to clipboard!
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- DOM Element Selection ---
        const generateButton = document.getElementById('generate-button');
        const uuidDisplay = document.getElementById('uuid-display');
        const copyButton = document.getElementById('copy-button');
        const toast = document.getElementById('toast');

        // --- Core UUID Generation Function ---
        /**
         * Generates a Version 4 UUID (Universally Unique Identifier).
         * This function uses the Web Crypto API for generating cryptographically strong random values.
         * @returns {string} A string representation of the generated UUID.
         */
        function generateUUID() {
            // The 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx' format is the standard for v4 UUIDs.
            // 'x' is replaced with a random hexadecimal digit.
            // 'y' is replaced with a random hexadecimal digit from the set {8, 9, A, B}.
            // '4' at the 13th position indicates a v4 UUID.
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                // Generate a random byte (0-255)
                const r = Math.random() * 16 | 0;
                // For 'y', the bits must be 10xx (so the value is 8, 9, A, or B)
                // This is done by the bitwise operation (r & 0x3 | 0x8)
                const v = c === 'x' ? r : (r & 0x3 | 0x8);
                // Convert the number to its hexadecimal representation
                return v.toString(16);
            });
        }

        // --- Event Listeners ---

        /**
         * Handles the click event for the 'Generate New UUID' button.
         * It generates a new UUID and updates the display.
         */
        generateButton.addEventListener('click', () => {
            const newUUID = generateUUID();
            uuidDisplay.textContent = newUUID;
        });

        /**
         * Handles the click event for the copy button.
         * Copies the currently displayed UUID to the user's clipboard.
         */
        copyButton.addEventListener('click', () => {
            const uuidToCopy = uuidDisplay.textContent;

            // Don't copy the initial placeholder text
            if (uuidToCopy === 'Click the button to generate a UUID') {
                return;
            }

            // The Clipboard API (navigator.clipboard.writeText) is modern but can fail in insecure contexts or iframes.
            // The document.execCommand('copy') is a fallback.
            try {
                // Create a temporary textarea element to hold the text
                const textArea = document.createElement('textarea');
                textArea.value = uuidToCopy;
                
                // Style it to be off-screen
                textArea.style.position = 'fixed';
                textArea.style.top = '-9999px';
                textArea.style.left = '-9999px';

                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();

                // Execute the copy command
                document.execCommand('copy');

                // Clean up the temporary element
                document.body.removeChild(textArea);

                // Show a confirmation toast message
                showToast();

            } catch (err) {
                console.error('Failed to copy text: ', err);
                // You could show an error toast here if needed
            }
        });

        /**
         * Displays a short-lived "Copied to clipboard!" notification.
         */
        function showToast() {
            toast.classList.remove('opacity-0');
            setTimeout(() => {
                toast.classList.add('opacity-0');
            }, 2000); // Hide after 2 seconds
        }

        // --- Initial State ---
        // Generate a UUID on page load for immediate use.
        window.addEventListener('load', () => {
            uuidDisplay.textContent = generateUUID();
        });
    </script>
</body>
</html>
